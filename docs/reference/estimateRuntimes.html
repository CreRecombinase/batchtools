<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Estimate Remaining Runtimes — estimateRuntimes • batchtools</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Estimate Remaining Runtimes — estimateRuntimes" />
<meta property="og:description" content="Estimates the runtimes of jobs using the random forest implemented in ranger.
Observed runtimes are retrieved from the Registry and runtimes are
predicted for unfinished jobs.
The estimated remaining time is calculated in the print method.
You may also pass n here to determine the number of parallel jobs which is then used
in a simple Longest Processing Time (LPT) algorithm to give an estimate for the parallel runtime." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">batchtools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.14</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/batchtools.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mllg/batchtools/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Estimate Remaining Runtimes</h1>
    <small class="dont-index">Source: <a href='https://github.com/mllg/batchtools/blob/master/R/estimateRuntimes.R'><code>R/estimateRuntimes.R</code></a></small>
    <div class="hidden name"><code>estimateRuntimes.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Estimates the runtimes of jobs using the random forest implemented in <span class="pkg">ranger</span>.
Observed runtimes are retrieved from the <code><a href='makeRegistry.html'>Registry</a></code> and runtimes are
predicted for unfinished jobs.</p>
<p>The estimated remaining time is calculated in the <code>print</code> method.
You may also pass <code>n</code> here to determine the number of parallel jobs which is then used
in a simple Longest Processing Time (LPT) algorithm to give an estimate for the parallel runtime.</p>
    </div>

    <pre class="usage"><span class='fu'>estimateRuntimes</span><span class='op'>(</span><span class='va'>tab</span>, <span class='va'>...</span>, reg <span class='op'>=</span> <span class='fu'><a href='getDefaultRegistry.html'>getDefaultRegistry</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># S3 method for RuntimeEstimate</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>x</span>, n <span class='op'>=</span> <span class='fl'>1L</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>tab</th>
      <td><p>[<code><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table</a></code>]<br />
Table with column &#8220;job.id&#8221; and additional columns to predict the runtime.
Observed runtimes will be looked up in the registry and serve as dependent variable.
All columns in <code>tab</code> except &#8220;job.id&#8221; will be passed to <code><a href='https://rdrr.io/pkg/ranger/man/ranger.html'>ranger</a></code> as
independent variables to fit the model.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>[ANY]<br />
Additional parameters passed to <code><a href='https://rdrr.io/pkg/ranger/man/ranger.html'>ranger</a></code>. Ignored for the <code>print</code> method.</p></td>
    </tr>
    <tr>
      <th>reg</th>
      <td><p>[<code><a href='makeRegistry.html'>Registry</a></code>]<br />
Registry. If not explicitly passed, uses the default registry (see <code><a href='getDefaultRegistry.html'>setDefaultRegistry</a></code>).</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>[<code>RuntimeEstimate</code>]<br />
Object to print.</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>[<code><a href='https://rdrr.io/r/base/integer.html'>integer(1)</a></code>]<br />
Number of parallel jobs to assume for runtime estimation.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>[<code>RuntimeEstimate</code>] which is a <code>list</code> with two named elements:
 &#8220;runtimes&#8221; is a <code><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table</a></code> with columns &#8220;job.id&#8221;,
 &#8220;runtime&#8221; (in seconds) and &#8220;type&#8221; (&#8220;estimated&#8221; if runtime is estimated,
 &#8220;observed&#8221; if runtime was observed).
 The other element of the list named &#8220;model&#8221;] contains the fitted random forest object.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='chunk.html'>binpack</a></code> and <code><a href='chunk.html'>lpt</a></code> to chunk jobs according to their estimated runtimes.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'> <span class='fu'>batchtools</span><span class='fu'>:::</span><span class='fu'>example_push_temp</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span> 
<span class='co'># Create a simple toy registry</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>
<span class='va'>tmp</span> <span class='op'>=</span> <span class='fu'><a href='makeExperimentRegistry.html'>makeExperimentRegistry</a></span><span class='op'>(</span>file.dir <span class='op'>=</span> <span class='cn'>NA</span>, make.default <span class='op'>=</span> <span class='cn'>FALSE</span>, seed <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>No readable configuration file found</span></div><div class='output co'>#&gt; <span class='message'>Created registry in '/tmp/batchtools-example/reg' using cluster functions 'Interactive'</span></div><div class='input'><span class='fu'><a href='addProblem.html'>addProblem</a></span><span class='op'>(</span>name <span class='op'>=</span> <span class='st'>"iris"</span>, data <span class='op'>=</span> <span class='va'>iris</span>, fun <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>...</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>)</span>, reg <span class='op'>=</span> <span class='va'>tmp</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Adding problem 'iris'</span></div><div class='input'><span class='fu'><a href='addAlgorithm.html'>addAlgorithm</a></span><span class='op'>(</span>name <span class='op'>=</span> <span class='st'>"nrow"</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>instance</span>, <span class='va'>...</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>instance</span><span class='op'>)</span>, reg <span class='op'>=</span> <span class='va'>tmp</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Adding algorithm 'nrow'</span></div><div class='input'><span class='fu'><a href='addAlgorithm.html'>addAlgorithm</a></span><span class='op'>(</span>name <span class='op'>=</span> <span class='st'>"ncol"</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>instance</span>, <span class='va'>...</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>ncol</a></span><span class='op'>(</span><span class='va'>instance</span><span class='op'>)</span>, reg <span class='op'>=</span> <span class='va'>tmp</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Adding algorithm 'ncol'</span></div><div class='input'><span class='fu'><a href='addExperiments.html'>addExperiments</a></span><span class='op'>(</span>algo.designs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>nrow <span class='op'>=</span> <span class='fu'>data.table</span><span class='fu'>::</span><span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/J.html'>CJ</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>50</span>, y <span class='op'>=</span> <span class='va'>letters</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>, reg <span class='op'>=</span> <span class='va'>tmp</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Adding 250 experiments ('iris'[1] x 'nrow'[250] x repls[1]) ...</span></div><div class='input'><span class='fu'><a href='addExperiments.html'>addExperiments</a></span><span class='op'>(</span>algo.designs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>ncol <span class='op'>=</span> <span class='fu'>data.table</span><span class='fu'>::</span><span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/J.html'>CJ</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>50</span>, y <span class='op'>=</span> <span class='va'>letters</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>, reg <span class='op'>=</span> <span class='va'>tmp</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Adding 250 experiments ('iris'[1] x 'ncol'[250] x repls[1]) ...</span></div><div class='input'>
<span class='co'># We use the job parameters to predict runtimes</span>
<span class='va'>tab</span> <span class='op'>=</span> <span class='fu'><a href='unwrap.html'>unwrap</a></span><span class='op'>(</span><span class='fu'><a href='getJobTable.html'>getJobPars</a></span><span class='op'>(</span>reg <span class='op'>=</span> <span class='va'>tmp</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># First we need to submit some jobs so that the forest can train on some data.</span>
<span class='co'># Thus, we just sample some jobs from the registry while grouping by factor variables.</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://r-datatable.com'>data.table</a></span><span class='op'>)</span>
<span class='va'>ids</span> <span class='op'>=</span> <span class='va'>tab</span><span class='op'>[</span>, <span class='va'>.SD</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>.SD</span><span class='op'>)</span>, <span class='fl'>5</span><span class='op'>)</span><span class='op'>]</span>, by <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"problem"</span>, <span class='st'>"algorithm"</span>, <span class='st'>"y"</span><span class='op'>)</span><span class='op'>]</span>
<span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/setkey.html'>setkeyv</a></span><span class='op'>(</span><span class='va'>ids</span>, <span class='st'>"job.id"</span><span class='op'>)</span>
<span class='fu'><a href='submitJobs.html'>submitJobs</a></span><span class='op'>(</span><span class='va'>ids</span>, reg <span class='op'>=</span> <span class='va'>tmp</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Submitting 50 jobs in 50 chunks using cluster functions 'Interactive' ...</span></div><div class='input'><span class='fu'><a href='waitForJobs.html'>waitForJobs</a></span><span class='op'>(</span>reg <span class='op'>=</span> <span class='va'>tmp</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># We "simulate" some more realistic runtimes here to demonstrate the functionality:</span>
<span class='co'># - Algorithm "ncol" is 5 times more expensive than "nrow"</span>
<span class='co'># - x has no effect on the runtime</span>
<span class='co'># - If y is "a" or "b", the runtimes are really high</span>
<span class='va'>runtime</span> <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>algorithm</span>, <span class='va'>x</span>, <span class='va'>y</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/fifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>algorithm</span> <span class='op'>==</span> <span class='st'>"nrow"</span>, <span class='fl'>100L</span>, <span class='fl'>500L</span><span class='op'>)</span> <span class='op'>+</span> <span class='fl'>1000L</span> <span class='op'>*</span> <span class='op'>(</span><span class='va'>y</span> <span class='op'>%in%</span> <span class='va'>letters</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span>
<span class='op'>}</span>
<span class='va'>tmp</span><span class='op'>$</span><span class='va'>status</span><span class='op'>[</span><span class='va'>ids</span>, <span class='va'>done</span> <span class='op'>:=</span> <span class='va'>done</span> <span class='op'>+</span> <span class='va'>tab</span><span class='op'>[</span><span class='va'>ids</span>, <span class='fu'>runtime</span><span class='op'>(</span><span class='va'>algorithm</span>, <span class='va'>x</span>, <span class='va'>y</span><span class='op'>)</span><span class='op'>]</span><span class='op'>]</span>
</div><div class='output co'>#&gt;      job.id def.id  submitted    started       done error mem.used resource.id
#&gt;   1:      1      1         NA         NA         NA  &lt;NA&gt;       NA          NA
#&gt;   2:      2      2         NA         NA         NA  &lt;NA&gt;       NA          NA
#&gt;   3:      3      3         NA         NA         NA  &lt;NA&gt;       NA          NA
#&gt;   4:      4      4         NA         NA         NA  &lt;NA&gt;       NA          NA
#&gt;   5:      5      5         NA         NA         NA  &lt;NA&gt;       NA          NA
#&gt;  ---                                                                          
#&gt; 496:    496    496         NA         NA         NA  &lt;NA&gt;       NA          NA
#&gt; 497:    497    497         NA         NA         NA  &lt;NA&gt;       NA          NA
#&gt; 498:    498    498         NA         NA         NA  &lt;NA&gt;       NA          NA
#&gt; 499:    499    499 1603197327 1603197327 1603197827  &lt;NA&gt;       NA           1
#&gt; 500:    500    500         NA         NA         NA  &lt;NA&gt;       NA          NA
#&gt;           batch.id log.file                            job.hash job.name repl
#&gt;   1:          &lt;NA&gt;     &lt;NA&gt;                                &lt;NA&gt;     &lt;NA&gt;    1
#&gt;   2:          &lt;NA&gt;     &lt;NA&gt;                                &lt;NA&gt;     &lt;NA&gt;    1
#&gt;   3:          &lt;NA&gt;     &lt;NA&gt;                                &lt;NA&gt;     &lt;NA&gt;    1
#&gt;   4:          &lt;NA&gt;     &lt;NA&gt;                                &lt;NA&gt;     &lt;NA&gt;    1
#&gt;   5:          &lt;NA&gt;     &lt;NA&gt;                                &lt;NA&gt;     &lt;NA&gt;    1
#&gt;  ---                                                                         
#&gt; 496:          &lt;NA&gt;     &lt;NA&gt;                                &lt;NA&gt;     &lt;NA&gt;    1
#&gt; 497:          &lt;NA&gt;     &lt;NA&gt;                                &lt;NA&gt;     &lt;NA&gt;    1
#&gt; 498:          &lt;NA&gt;     &lt;NA&gt;                                &lt;NA&gt;     &lt;NA&gt;    1
#&gt; 499: cfInteractive     &lt;NA&gt; job7c4bbe21691c77d776b738c39a54fd28     &lt;NA&gt;    1
#&gt; 500:          &lt;NA&gt;     &lt;NA&gt;                                &lt;NA&gt;     &lt;NA&gt;    1</div><div class='input'><span class='fu'><a href='JoinTables.html'>rjoin</a></span><span class='op'>(</span><span class='fu'><a href='JoinTables.html'>sjoin</a></span><span class='op'>(</span><span class='va'>tab</span>, <span class='va'>ids</span><span class='op'>)</span>, <span class='fu'><a href='getJobTable.html'>getJobStatus</a></span><span class='op'>(</span><span class='va'>ids</span>, reg <span class='op'>=</span> <span class='va'>tmp</span><span class='op'>)</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"job.id"</span>, <span class='st'>"time.running"</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span>
</div><div class='output co'>#&gt;     job.id problem algorithm  x y   time.running
#&gt;  1:     32    iris      nrow  7 b 1100.0049 secs
#&gt;  2:     42    iris      nrow  9 b 1100.0046 secs
#&gt;  3:     47    iris      nrow 10 b 1100.0046 secs
#&gt;  4:     66    iris      nrow 14 a 1100.0055 secs
#&gt;  5:     73    iris      nrow 15 c  100.0065 secs
#&gt;  6:     75    iris      nrow 15 e  100.0099 secs
#&gt;  7:     86    iris      nrow 18 a 1100.0058 secs
#&gt;  8:    100    iris      nrow 20 e  100.0060 secs
#&gt;  9:    101    iris      nrow 21 a 1100.0049 secs
#&gt; 10:    103    iris      nrow 21 c  100.0046 secs
#&gt; 11:    123    iris      nrow 25 c  100.0042 secs
#&gt; 12:    125    iris      nrow 25 e  100.0059 secs
#&gt; 13:    161    iris      nrow 33 a 1100.0059 secs
#&gt; 14:    165    iris      nrow 33 e  100.0110 secs
#&gt; 15:    169    iris      nrow 34 d  100.0049 secs
#&gt; 16:    183    iris      nrow 37 c  100.0058 secs
#&gt; 17:    184    iris      nrow 37 d  100.0058 secs
#&gt; 18:    203    iris      nrow 41 c  100.0051 secs
#&gt; 19:    207    iris      nrow 42 b 1100.0050 secs
#&gt; 20:    209    iris      nrow 42 d  100.0049 secs
#&gt; 21:    220    iris      nrow 44 e  100.0052 secs
#&gt; 22:    227    iris      nrow 46 b 1100.0054 secs
#&gt; 23:    229    iris      nrow 46 d  100.0068 secs
#&gt; 24:    231    iris      nrow 47 a 1100.0059 secs
#&gt; 25:    244    iris      nrow 49 d  100.0057 secs
#&gt; 26:    260    iris      ncol  2 e  500.0053 secs
#&gt; 27:    276    iris      ncol  6 a 1500.0050 secs
#&gt; 28:    278    iris      ncol  6 c  500.0066 secs
#&gt; 29:    279    iris      ncol  6 d  500.0054 secs
#&gt; 30:    296    iris      ncol 10 a 1500.0066 secs
#&gt; 31:    320    iris      ncol 14 e  500.0052 secs
#&gt; 32:    340    iris      ncol 18 e  500.0046 secs
#&gt; 33:    347    iris      ncol 20 b 1500.0046 secs
#&gt; 34:    363    iris      ncol 23 c  500.0061 secs
#&gt; 35:    369    iris      ncol 24 d  500.0062 secs
#&gt; 36:    373    iris      ncol 25 c  500.0063 secs
#&gt; 37:    387    iris      ncol 28 b 1500.0051 secs
#&gt; 38:    410    iris      ncol 32 e  500.0055 secs
#&gt; 39:    421    iris      ncol 35 a 1500.0070 secs
#&gt; 40:    436    iris      ncol 38 a 1500.0054 secs
#&gt; 41:    444    iris      ncol 39 d  500.0056 secs
#&gt; 42:    448    iris      ncol 40 c  500.0055 secs
#&gt; 43:    456    iris      ncol 42 a 1500.0059 secs
#&gt; 44:    459    iris      ncol 42 d  500.0058 secs
#&gt; 45:    467    iris      ncol 44 b 1500.0053 secs
#&gt; 46:    468    iris      ncol 44 c  500.0057 secs
#&gt; 47:    475    iris      ncol 45 e  500.0070 secs
#&gt; 48:    482    iris      ncol 47 b 1500.0070 secs
#&gt; 49:    492    iris      ncol 49 b 1500.0061 secs
#&gt; 50:    499    iris      ncol 50 d  500.0059 secs
#&gt;     job.id problem algorithm  x y   time.running</div><div class='input'>
<span class='co'># Estimate runtimes:</span>
<span class='va'>est</span> <span class='op'>=</span> <span class='fu'>estimateRuntimes</span><span class='op'>(</span><span class='va'>tab</span>, reg <span class='op'>=</span> <span class='va'>tmp</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>est</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Runtime Estimate for 500 jobs with 1 CPUs
#&gt;   Done     : 0d 09h 43m 20.3s
#&gt;   Remaining: 3d 17h 34m 34.9s
#&gt;   Total    : 4d 03h 17m 55.2s</div><div class='input'><span class='fu'><a href='JoinTables.html'>rjoin</a></span><span class='op'>(</span><span class='va'>tab</span>, <span class='va'>est</span><span class='op'>$</span><span class='va'>runtimes</span><span class='op'>)</span>
</div><div class='output co'>#&gt;      job.id problem algorithm  x y      type   runtime
#&gt;   1:      1    iris      nrow  1 a estimated 1103.4590
#&gt;   2:      2    iris      nrow  1 b estimated 1087.2531
#&gt;   3:      3    iris      nrow  1 c estimated  338.3327
#&gt;   4:      4    iris      nrow  1 d estimated  318.0785
#&gt;   5:      5    iris      nrow  1 e estimated  317.7231
#&gt;  ---                                                  
#&gt; 496:    496    iris      ncol 50 a estimated 1387.5999
#&gt; 497:    497    iris      ncol 50 b estimated 1394.6896
#&gt; 498:    498    iris      ncol 50 c estimated  618.0633
#&gt; 499:    499    iris      ncol 50 d  observed  500.0059
#&gt; 500:    500    iris      ncol 50 e estimated  578.6555</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>est</span>, n <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Runtime Estimate for 500 jobs with 10 CPUs
#&gt;   Done     : 0d 09h 43m 20.3s
#&gt;   Remaining: 3d 17h 34m 34.9s
#&gt;   Parallel : 0d 08h 58m 10.3s
#&gt;   Total    : 4d 03h 17m 55.2s</div><div class='input'>
<span class='co'># Submit jobs with longest runtime first:</span>
<span class='va'>ids</span> <span class='op'>=</span> <span class='va'>est</span><span class='op'>$</span><span class='va'>runtimes</span><span class='op'>[</span><span class='va'>type</span> <span class='op'>==</span> <span class='st'>"estimated"</span><span class='op'>]</span><span class='op'>[</span><span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/setorder.html'>order</a></span><span class='op'>(</span><span class='va'>runtime</span>, decreasing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>]</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>ids</span><span class='op'>)</span>
</div><div class='output co'>#&gt;      job.id      type   runtime
#&gt;   1:    466 estimated 1422.9803
#&gt;   2:    461 estimated 1419.5870
#&gt;   3:    472 estimated 1415.9535
#&gt;   4:    462 estimated 1415.6001
#&gt;   5:    457 estimated 1414.8001
#&gt;  ---                           
#&gt; 446:    204 estimated  132.6668
#&gt; 447:    185 estimated  132.3737
#&gt; 448:    189 estimated  131.9505
#&gt; 449:    174 estimated  131.3331
#&gt; 450:    179 estimated  130.1864</div><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='fu'><a href='submitJobs.html'>submitJobs</a></span><span class='op'>(</span><span class='va'>ids</span>, reg <span class='op'>=</span> <span class='va'>tmp</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='co'># Group jobs into chunks with runtime &lt; 1h</span>
<span class='va'>ids</span> <span class='op'>=</span> <span class='va'>est</span><span class='op'>$</span><span class='va'>runtimes</span><span class='op'>[</span><span class='va'>type</span> <span class='op'>==</span> <span class='st'>"estimated"</span><span class='op'>]</span>
<span class='va'>ids</span><span class='op'>[</span>, <span class='va'>chunk</span> <span class='op'>:=</span> <span class='fu'><a href='chunk.html'>binpack</a></span><span class='op'>(</span><span class='va'>runtime</span>, <span class='fl'>3600</span><span class='op'>)</span><span class='op'>]</span>
</div><div class='output co'>#&gt;      job.id      type   runtime chunk
#&gt;   1:      1 estimated 1103.4590    48
#&gt;   2:      2 estimated 1087.2531    52
#&gt;   3:      3 estimated  338.3327    36
#&gt;   4:      4 estimated  318.0785    33
#&gt;   5:      5 estimated  317.7231    70
#&gt;  ---                                 
#&gt; 446:    495 estimated  584.3901    15
#&gt; 447:    496 estimated 1387.5999    18
#&gt; 448:    497 estimated 1394.6896    13
#&gt; 449:    498 estimated  618.0633     4
#&gt; 450:    500 estimated  578.6555    20</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>ids</span><span class='op'>)</span>
</div><div class='output co'>#&gt;      job.id      type   runtime chunk
#&gt;   1:      1 estimated 1103.4590    48
#&gt;   2:      2 estimated 1087.2531    52
#&gt;   3:      3 estimated  338.3327    36
#&gt;   4:      4 estimated  318.0785    33
#&gt;   5:      5 estimated  317.7231    70
#&gt;  ---                                 
#&gt; 446:    495 estimated  584.3901    15
#&gt; 447:    496 estimated 1387.5999    18
#&gt; 448:    497 estimated 1394.6896    13
#&gt; 449:    498 estimated  618.0633     4
#&gt; 450:    500 estimated  578.6555    20</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>ids</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>runtime <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>runtime</span><span class='op'>)</span><span class='op'>)</span>, by <span class='op'>=</span> <span class='va'>chunk</span><span class='op'>]</span><span class='op'>)</span>
</div><div class='output co'>#&gt;     chunk  runtime
#&gt;  1:    48 3485.338
#&gt;  2:    52 3598.644
#&gt;  3:    36 3599.459
#&gt;  4:    33 3596.494
#&gt;  5:    70 3490.925
#&gt;  6:    49 3479.219
#&gt;  7:    37 3595.168
#&gt;  8:    51 3596.367
#&gt;  9:    71 3488.611
#&gt; 10:    53 3599.742
#&gt; 11:    68 3496.038
#&gt; 12:    72 3485.351
#&gt; 13:    54 3589.155
#&gt; 14:    69 3494.538
#&gt; 15:    73 3478.069
#&gt; 16:    46 3516.899
#&gt; 17:    50 3599.762
#&gt; 18:    42 3572.213
#&gt; 19:    64 3516.755
#&gt; 20:    66 3506.507
#&gt; 21:    43 3569.239
#&gt; 22:    65 3512.215
#&gt; 23:    67 3505.174
#&gt; 24:    41 3581.446
#&gt; 25:    59 3537.144
#&gt; 26:    60 3532.235
#&gt; 27:    47 3493.115
#&gt; 28:    38 3599.214
#&gt; 29:    35 3599.986
#&gt; 30:    40 3589.694
#&gt; 31:    57 3561.085
#&gt; 32:    58 3546.237
#&gt; 33:    39 3594.115
#&gt; 34:    55 3581.046
#&gt; 35:    56 3570.053
#&gt; 36:    44 3534.662
#&gt; 37:    61 3522.996
#&gt; 38:    34 3598.099
#&gt; 39:    45 3533.418
#&gt; 40:    63 3518.338
#&gt; 41:    62 3521.086
#&gt; 42:    27 3597.000
#&gt; 43:    26 3586.504
#&gt; 44:    24 3596.226
#&gt; 45:    25 3597.570
#&gt; 46:    23 3597.820
#&gt; 47:    29 3567.933
#&gt; 48:    75 3599.097
#&gt; 49:    20 3522.443
#&gt; 50:    74 3474.955
#&gt; 51:     8 3591.306
#&gt; 52:    21 3515.784
#&gt; 53:    11 3565.927
#&gt; 54:     7 3592.927
#&gt; 55:    12 3563.426
#&gt; 56:     5 3593.237
#&gt; 57:     6 3598.126
#&gt; 58:    32 3599.468
#&gt; 59:    10 3579.486
#&gt; 60:    80 3481.959
#&gt; 61:    82 3598.299
#&gt; 62:    83 3597.802
#&gt; 63:     4 3598.686
#&gt; 64:    79 3493.361
#&gt; 65:    81 3474.061
#&gt; 66:    76 3587.729
#&gt; 67:    87 3564.202
#&gt; 68:    89 3546.702
#&gt; 69:    91 2158.021
#&gt; 70:    78 3506.583
#&gt; 71:    88 3554.982
#&gt; 72:    77 3523.895
#&gt; 73:    85 3580.521
#&gt; 74:     3 3599.219
#&gt; 75:    90 3522.918
#&gt; 76:    84 3586.090
#&gt; 77:    86 3572.917
#&gt; 78:     2 3599.764
#&gt; 79:     1 3599.763
#&gt; 80:     9 3587.324
#&gt; 81:    30 3560.138
#&gt; 82:    13 3599.521
#&gt; 83:    14 3598.014
#&gt; 84:    22 3598.040
#&gt; 85:    19 3574.641
#&gt; 86:    17 3585.269
#&gt; 87:    31 3546.246
#&gt; 88:    18 3581.006
#&gt; 89:    28 3574.646
#&gt; 90:    16 3598.238
#&gt; 91:    15 3599.249
#&gt;     chunk  runtime</div><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='fu'><a href='submitJobs.html'>submitJobs</a></span><span class='op'>(</span><span class='va'>ids</span>, reg <span class='op'>=</span> <span class='va'>tmp</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='co'># Group jobs into 10 chunks with similar runtime</span>
<span class='va'>ids</span> <span class='op'>=</span> <span class='va'>est</span><span class='op'>$</span><span class='va'>runtimes</span><span class='op'>[</span><span class='va'>type</span> <span class='op'>==</span> <span class='st'>"estimated"</span><span class='op'>]</span>
<span class='va'>ids</span><span class='op'>[</span>, <span class='va'>chunk</span> <span class='op'>:=</span> <span class='fu'><a href='chunk.html'>lpt</a></span><span class='op'>(</span><span class='va'>runtime</span>, <span class='fl'>10</span><span class='op'>)</span><span class='op'>]</span>
</div><div class='output co'>#&gt;      job.id      type   runtime chunk
#&gt;   1:      1 estimated 1103.4590     7
#&gt;   2:      2 estimated 1087.2531     5
#&gt;   3:      3 estimated  338.3327     9
#&gt;   4:      4 estimated  318.0785     3
#&gt;   5:      5 estimated  317.7231     5
#&gt;  ---                                 
#&gt; 446:    495 estimated  584.3901    10
#&gt; 447:    496 estimated 1387.5999     6
#&gt; 448:    497 estimated 1394.6896     6
#&gt; 449:    498 estimated  618.0633     8
#&gt; 450:    500 estimated  578.6555     9</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>ids</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>runtime <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>runtime</span><span class='op'>)</span><span class='op'>)</span>, by <span class='op'>=</span> <span class='va'>chunk</span><span class='op'>]</span><span class='op'>)</span>
</div><div class='output co'>#&gt;     chunk  runtime
#&gt;  1:     7 32290.29
#&gt;  2:     5 32288.78
#&gt;  3:     9 32212.48
#&gt;  4:     3 32215.25
#&gt;  5:     8 32271.77
#&gt;  6:     4 32212.70
#&gt;  7:     2 32210.72
#&gt;  8:     1 32289.79
#&gt;  9:     6 32271.49
#&gt; 10:    10 32211.62</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Michel Lang, Bernd Bischl.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


