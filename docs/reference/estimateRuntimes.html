<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Estimate Remaining Runtimes — estimateRuntimes • batchtools</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
<meta property="og:title" content="Estimate Remaining Runtimes — estimateRuntimes" />

<meta property="og:description" content="Estimates the runtimes of jobs using the random forest implemented in ranger.
Observed runtimes are retrieved from the Registry and runtimes are
predicted for unfinished jobs.
The estimated remaining time is calculated in the print method.
You may also pass n here to determine the number of parallel jobs which is then used
in a simple Longest Processing Time (LPT) algorithm to give an estimate for the parallel runtime." />
<meta name="twitter:card" content="summary" />
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">batchtools</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/batchtools.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mllg/batchtools">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Estimate Remaining Runtimes</h1>
    <small>Source: <a href='https://github.com/mllg/batchtools/blob/master/R/estimateRuntimes.R'><code>R/estimateRuntimes.R</code></a></small>
    </div>

    
    <p>Estimates the runtimes of jobs using the random forest implemented in <span class="pkg">ranger</span>.
Observed runtimes are retrieved from the <code><a href='makeRegistry.html'>Registry</a></code> and runtimes are
predicted for unfinished jobs.</p>
<p>The estimated remaining time is calculated in the <code>print</code> method.
You may also pass <code>n</code> here to determine the number of parallel jobs which is then used
in a simple Longest Processing Time (LPT) algorithm to give an estimate for the parallel runtime.</p>
    

    <pre class="usage"><span class='fu'>estimateRuntimes</span>(<span class='no'>tab</span>, <span class='no'>...</span>, <span class='kw'>reg</span> <span class='kw'>=</span> <span class='fu'><a href='getDefaultRegistry.html'>getDefaultRegistry</a></span>())

<span class='co'># S3 method for RuntimeEstimate</span>
<span class='fu'>print</span>(<span class='no'>x</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>tab</th>
      <td><p>[<code>data.table</code>]<br />
Table with column &#8220;job.id&#8221; and additional columns to predict the runtime.
Observed runtimes will be looked up in the registry and serve as dependent variable.
All columns in <code>tab</code> except &#8220;job.id&#8221; will be passed to <code><a href='http://www.rdocumentation.org/packages/ranger/topics/ranger'>ranger</a></code> as
independent variables to fit the model.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>[ANY]<br />
Additional parameters passed to <code><a href='http://www.rdocumentation.org/packages/ranger/topics/ranger'>ranger</a></code>. Ignored for the <code>print</code> method.</p></td>
    </tr>
    <tr>
      <th>reg</th>
      <td><p>[<code><a href='makeRegistry.html'>Registry</a></code>]<br />
Registry. If not explicitly passed, uses the default registry (see <code><a href='getDefaultRegistry.html'>setDefaultRegistry</a></code>).</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>[<code>RuntimeEstimate</code>]<br />
Object to print.</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>[<code>integer(1)</code>]<br />
Number of parallel jobs to assume for runtime estimation.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>[<code>RuntimeEstimate</code>] which is a <code>list</code> with two named elements:
 &#8220;runtimes&#8221; is a <code>data.table</code> with columns &#8220;job.id&#8221;,
 &#8220;runtime&#8221; (in seconds) and &#8220;type&#8221; (&#8220;estimated&#8221; if runtime is estimated,
 &#8220;observed&#8221; if runtime was observed).
 The other element of the list named &#8220;model&#8221;] contains the fitted random forest object.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='chunk.html'>binpack</a></code> and <code><a href='chunk.html'>lpt</a></code> to chunk jobs according to their estimated runtimes.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Create a simple toy registry</span>
<span class='fu'>set.seed</span>(<span class='fl'>1</span>)
<span class='no'>tmp</span> <span class='kw'>=</span> <span class='fu'><a href='makeExperimentRegistry.html'>makeExperimentRegistry</a></span>(<span class='kw'>file.dir</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>make.default</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='fl'>1</span>)</div><div class='output co'>#&gt; <span class='message'>No configuration file found</span></div><div class='output co'>#&gt; <span class='message'>Created registry in '/var/folders/pj/dcslzytj3t30v_ylpyyfyyl00000gn/T/batchtools-example/reg' using cluster functions 'Interactive'</span></div><div class='input'><span class='fu'><a href='addProblem.html'>addProblem</a></span>(<span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"iris"</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>iris</span>, <span class='kw'>fun</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>data</span>, <span class='no'>...</span>) <span class='fu'>nrow</span>(<span class='no'>data</span>), <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt; <span class='message'>Adding problem 'iris'</span></div><div class='input'><span class='fu'><a href='addAlgorithm.html'>addAlgorithm</a></span>(<span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"nrow"</span>, <span class='kw'>function</span>(<span class='no'>instance</span>, <span class='no'>...</span>) <span class='fu'>nrow</span>(<span class='no'>instance</span>), <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt; <span class='message'>Adding algorithm 'nrow'</span></div><div class='input'><span class='fu'><a href='addAlgorithm.html'>addAlgorithm</a></span>(<span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"ncol"</span>, <span class='kw'>function</span>(<span class='no'>instance</span>, <span class='no'>...</span>) <span class='fu'>ncol</span>(<span class='no'>instance</span>), <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt; <span class='message'>Adding algorithm 'ncol'</span></div><div class='input'><span class='fu'><a href='addExperiments.html'>addExperiments</a></span>(<span class='kw'>algo.designs</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>nrow</span> <span class='kw'>=</span> <span class='fu'>CJ</span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>50</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>letters</span>[<span class='fl'>1</span>:<span class='fl'>5</span>])), <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt; <span class='message'>Adding 250 experiments ('iris'[1] x 'nrow'[250] x repls[1]) ...</span></div><div class='input'><span class='fu'><a href='addExperiments.html'>addExperiments</a></span>(<span class='kw'>algo.designs</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fu'>CJ</span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>50</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>letters</span>[<span class='fl'>1</span>:<span class='fl'>5</span>])), <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt; <span class='message'>Adding 250 experiments ('iris'[1] x 'ncol'[250] x repls[1]) ...</span></div><div class='input'>
<span class='co'># We use the job parameters to predict runtimes</span>
<span class='no'>tab</span> <span class='kw'>=</span> <span class='fu'><a href='unwrap.html'>unwrap</a></span>(<span class='fu'><a href='getJobTable.html'>getJobPars</a></span>(<span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>))

<span class='co'># First we need to submit some jobs so that the forest can train on some data.</span>
<span class='co'># Thus, we just sample some jobs from the registry while grouping by factor variables.</span>
<span class='no'>ids</span> <span class='kw'>=</span> <span class='no'>tab</span>[, <span class='no'>.SD</span>[<span class='fu'>sample</span>(<span class='fu'>nrow</span>(<span class='no'>.SD</span>), <span class='fl'>5</span>)], <span class='kw'>by</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"problem"</span>, <span class='st'>"algorithm"</span>, <span class='st'>"y"</span>)]
<span class='fu'>setkeyv</span>(<span class='no'>ids</span>, <span class='st'>"job.id"</span>)
<span class='fu'><a href='submitJobs.html'>submitJobs</a></span>(<span class='no'>ids</span>, <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt; <span class='message'>Submitting 50 jobs in 50 chunks using cluster functions 'Interactive' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 4 (seed = 5) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 16 (seed = 17) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 34 (seed = 35) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 41 (seed = 42) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 46 (seed = 47) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 48 (seed = 49) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 69 (seed = 70) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 85 (seed = 86) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 89 (seed = 90) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 94 (seed = 95) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 97 (seed = 98) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 98 (seed = 99) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 115 (seed = 116) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 117 (seed = 118) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 120 (seed = 121) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 145 (seed = 146) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 148 (seed = 149) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 156 (seed = 157) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 167 (seed = 168) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 187 (seed = 188) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 193 (seed = 194) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 220 (seed = 221) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 223 (seed = 224) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 227 (seed = 228) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'nrow' on problem 'iris' for job 246 (seed = 247) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 258 (seed = 259) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 270 (seed = 271) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 271 (seed = 272) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 275 (seed = 276) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 296 (seed = 297) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 315 (seed = 316) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 325 (seed = 326) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 352 (seed = 353) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 354 (seed = 355) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 358 (seed = 359) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 364 (seed = 365) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 370 (seed = 371) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 378 (seed = 379) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 388 (seed = 389) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 402 (seed = 403) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 411 (seed = 412) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 419 (seed = 420) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 432 (seed = 433) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 434 (seed = 435) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 436 (seed = 437) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 438 (seed = 439) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 447 (seed = 448) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 451 (seed = 452) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 454 (seed = 455) ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Generating problem instance for problem 'iris' ...</span></div><div class='output co'>#&gt; <span class='message'>### [bt]: Applying algorithm 'ncol' on problem 'iris' for job 497 (seed = 498) ...</span></div><div class='input'><span class='fu'><a href='waitForJobs.html'>waitForJobs</a></span>(<span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># We "simulate" some more realistic runtimes here to demonstrate the functionality:</span>
<span class='co'># - Algorithm "ncol" is 5 times more expensive than "nrow"</span>
<span class='co'># - x has no effect on the runtime</span>
<span class='co'># - If y is "a" or "b", the runtimes are really high</span>
<span class='no'>runtime</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>algorithm</span>, <span class='no'>x</span>, <span class='no'>y</span>) {
  <span class='fu'>ifelse</span>(<span class='no'>algorithm</span> <span class='kw'>==</span> <span class='st'>"nrow"</span>, <span class='fl'>100L</span>, <span class='fl'>500L</span>) + <span class='fl'>1000L</span> * (<span class='no'>y</span> <span class='kw'>%in%</span> <span class='no'>letters</span>[<span class='fl'>1</span>:<span class='fl'>2</span>])
}
<span class='no'>tmp</span>$<span class='no'>status</span>[<span class='no'>ids</span>, <span class='no'>done</span> <span class='kw'>:=</span> <span class='no'>done</span> + <span class='no'>tab</span>[<span class='no'>ids</span>, <span class='fu'>runtime</span>(<span class='no'>algorithm</span>, <span class='no'>x</span>, <span class='no'>y</span>)]]</div><div class='output co'>#&gt;      job.id def.id  submitted    started       done  error mem.used resource.id
#&gt;       &lt;int&gt;  &lt;int&gt;      &lt;num&gt;      &lt;num&gt;      &lt;num&gt; &lt;char&gt;    &lt;num&gt;       &lt;int&gt;
#&gt;   1:      1      1         NA         NA         NA     NA       NA          NA
#&gt;   2:      2      2         NA         NA         NA     NA       NA          NA
#&gt;   3:      3      3         NA         NA         NA     NA       NA          NA
#&gt;   4:      4      4 1521642338 1521642338 1521642438     NA       NA           1
#&gt;  ---                                                                           
#&gt; 496:    496    496         NA         NA         NA     NA       NA          NA
#&gt; 497:    497    497 1521642340 1521642340 1521643840     NA       NA           1
#&gt; 498:    498    498         NA         NA         NA     NA       NA          NA
#&gt; 499:    499    499         NA         NA         NA     NA       NA          NA
#&gt; 500:    500    500         NA         NA         NA     NA       NA          NA
#&gt;           batch.id log.file                            job.hash job.name  repl
#&gt;             &lt;char&gt;   &lt;char&gt;                              &lt;char&gt;   &lt;char&gt; &lt;int&gt;
#&gt;   1:            NA       NA                                  NA       NA     1
#&gt;   2:            NA       NA                                  NA       NA     1
#&gt;   3:            NA       NA                                  NA       NA     1
#&gt;   4: cfInteractive       NA job6d0c221f37dee98263354ebec7c2d128       NA     1
#&gt;  ---                                                                          
#&gt; 496:            NA       NA                                  NA       NA     1
#&gt; 497: cfInteractive       NA joba097ebb20ece21a66ab9b4b2dade603f       NA     1
#&gt; 498:            NA       NA                                  NA       NA     1
#&gt; 499:            NA       NA                                  NA       NA     1
#&gt; 500:            NA       NA                                  NA       NA     1</div><div class='input'><span class='fu'><a href='JoinTables.html'>rjoin</a></span>(<span class='fu'><a href='JoinTables.html'>sjoin</a></span>(<span class='no'>tab</span>, <span class='no'>ids</span>), <span class='fu'><a href='getJobTable.html'>getJobStatus</a></span>(<span class='no'>ids</span>, <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)[, <span class='fu'>c</span>(<span class='st'>"job.id"</span>, <span class='st'>"time.running"</span>)])</div><div class='output co'>#&gt;     job.id problem algorithm     x      y   time.running
#&gt;      &lt;int&gt;  &lt;char&gt;    &lt;char&gt; &lt;int&gt; &lt;char&gt;     &lt;difftime&gt;
#&gt;  1:      4    iris      nrow     1      d  100.0132 secs
#&gt;  2:     16    iris      nrow     4      a 1100.0288 secs
#&gt;  3:     34    iris      nrow     7      d  100.0128 secs
#&gt;  4:     41    iris      nrow     9      a 1100.0080 secs
#&gt;  5:     46    iris      nrow    10      a 1100.0084 secs
#&gt;  6:     48    iris      nrow    10      c  100.0144 secs
#&gt;  7:     69    iris      nrow    14      d  100.0083 secs
#&gt;  8:     85    iris      nrow    17      e  100.0093 secs
#&gt;  9:     89    iris      nrow    18      d  100.0084 secs
#&gt; 10:     94    iris      nrow    19      d  100.0100 secs
#&gt; 11:     97    iris      nrow    20      b 1100.0122 secs
#&gt; 12:     98    iris      nrow    20      c  100.0081 secs
#&gt; 13:    115    iris      nrow    23      e  100.0118 secs
#&gt; 14:    117    iris      nrow    24      b 1100.0094 secs
#&gt; 15:    120    iris      nrow    24      e  100.0114 secs
#&gt; 16:    145    iris      nrow    29      e  100.0088 secs
#&gt; 17:    148    iris      nrow    30      c  100.0103 secs
#&gt; 18:    156    iris      nrow    32      a 1100.0152 secs
#&gt; 19:    167    iris      nrow    34      b 1100.0096 secs
#&gt; 20:    187    iris      nrow    38      b 1100.0094 secs
#&gt; 21:    193    iris      nrow    39      c  100.0110 secs
#&gt; 22:    220    iris      nrow    44      e  100.0082 secs
#&gt; 23:    223    iris      nrow    45      c  100.0175 secs
#&gt; 24:    227    iris      nrow    46      b 1100.0111 secs
#&gt; 25:    246    iris      nrow    50      a 1100.0119 secs
#&gt; 26:    258    iris      ncol     2      c  500.0101 secs
#&gt; 27:    270    iris      ncol     4      e  500.0082 secs
#&gt; 28:    271    iris      ncol     5      a 1500.0086 secs
#&gt; 29:    275    iris      ncol     5      e  500.0085 secs
#&gt; 30:    296    iris      ncol    10      a 1500.0083 secs
#&gt; 31:    315    iris      ncol    13      e  500.0088 secs
#&gt; 32:    325    iris      ncol    15      e  500.0119 secs
#&gt; 33:    352    iris      ncol    21      b 1500.0099 secs
#&gt; 34:    354    iris      ncol    21      d  500.0081 secs
#&gt; 35:    358    iris      ncol    22      c  500.0091 secs
#&gt; 36:    364    iris      ncol    23      d  500.0105 secs
#&gt; 37:    370    iris      ncol    24      e  500.0117 secs
#&gt; 38:    378    iris      ncol    26      c  500.0119 secs
#&gt; 39:    388    iris      ncol    28      c  500.0084 secs
#&gt; 40:    402    iris      ncol    31      b 1500.0081 secs
#&gt; 41:    411    iris      ncol    33      a 1500.0082 secs
#&gt; 42:    419    iris      ncol    34      d  500.0080 secs
#&gt; 43:    432    iris      ncol    37      b 1500.0099 secs
#&gt; 44:    434    iris      ncol    37      d  500.0104 secs
#&gt; 45:    436    iris      ncol    38      a 1500.0112 secs
#&gt; 46:    438    iris      ncol    38      c  500.0085 secs
#&gt; 47:    447    iris      ncol    40      b 1500.0113 secs
#&gt; 48:    451    iris      ncol    41      a 1500.0091 secs
#&gt; 49:    454    iris      ncol    41      d  500.0107 secs
#&gt; 50:    497    iris      ncol    50      b 1500.0119 secs
#&gt;     job.id problem algorithm     x      y   time.running</div><div class='input'>
<span class='co'># Estimate runtimes:</span>
<span class='no'>est</span> <span class='kw'>=</span> <span class='fu'>estimateRuntimes</span>(<span class='no'>tab</span>, <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)
<span class='fu'>print</span>(<span class='no'>est</span>)</div><div class='output co'>#&gt; Runtime Estimate for 500 jobs with 1 CPUs
#&gt;   Done     : 0d 09h 43m 20.5s
#&gt;   Remaining: 3d 16h 23m 10.7s
#&gt;   Total    : 4d 02h 06m 31.2s</div><div class='input'><span class='fu'><a href='JoinTables.html'>rjoin</a></span>(<span class='no'>tab</span>, <span class='no'>est</span>$<span class='no'>runtimes</span>)</div><div class='output co'>#&gt;      job.id problem algorithm     x      y      type   runtime
#&gt;       &lt;int&gt;  &lt;char&gt;    &lt;char&gt; &lt;int&gt; &lt;char&gt;    &lt;fctr&gt;     &lt;num&gt;
#&gt;   1:      1    iris      nrow     1      a estimated 1042.7630
#&gt;   2:      2    iris      nrow     1      b estimated 1042.5288
#&gt;   3:      3    iris      nrow     1      c estimated  190.2161
#&gt;   4:      4    iris      nrow     1      d  observed  100.0132
#&gt;  ---                                                          
#&gt; 496:    496    iris      ncol    50      a estimated 1398.7162
#&gt; 497:    497    iris      ncol    50      b  observed 1500.0119
#&gt; 498:    498    iris      ncol    50      c estimated  600.2321
#&gt; 499:    499    iris      ncol    50      d estimated  577.6769
#&gt; 500:    500    iris      ncol    50      e estimated  565.3525</div><div class='input'><span class='fu'>print</span>(<span class='no'>est</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>10</span>)</div><div class='output co'>#&gt; Runtime Estimate for 500 jobs with 10 CPUs
#&gt;   Done     : 0d 09h 43m 20.5s
#&gt;   Remaining: 3d 16h 23m 10.7s
#&gt;   Parallel : 0d 08h 51m 28.0s
#&gt;   Total    : 4d 02h 06m 31.2s</div><div class='input'>
<span class='co'># Submit jobs with longest runtime first:</span>
<span class='no'>ids</span> <span class='kw'>=</span> <span class='no'>est</span>$<span class='no'>runtimes</span>[<span class='no'>type</span> <span class='kw'>==</span> <span class='st'>"estimated"</span>][<span class='fu'>order</span>(<span class='no'>runtime</span>, <span class='kw'>decreasing</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)]
<span class='fu'>print</span>(<span class='no'>ids</span>)</div><div class='output co'>#&gt;      job.id      type   runtime
#&gt;       &lt;int&gt;    &lt;fctr&gt;     &lt;num&gt;
#&gt;   1:    446 estimated 1433.0659
#&gt;   2:    456 estimated 1425.0759
#&gt;   3:    431 estimated 1420.8725
#&gt;   4:    441 estimated 1420.6791
#&gt;  ---                           
#&gt; 446:     90 estimated  135.5278
#&gt; 447:     99 estimated  131.9226
#&gt; 448:     74 estimated  130.6965
#&gt; 449:     79 estimated  129.0520
#&gt; 450:     84 estimated  125.9453</div><span class='co'># NOT RUN {</span>
<span class='fu'><a href='submitJobs.html'>submitJobs</a></span>(<span class='no'>ids</span>, <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)
<span class='co'># }</span><div class='input'>
<span class='co'># Group jobs into chunks with runtime &lt; 1h</span>
<span class='no'>ids</span> <span class='kw'>=</span> <span class='no'>est</span>$<span class='no'>runtimes</span>[<span class='no'>type</span> <span class='kw'>==</span> <span class='st'>"estimated"</span>]
<span class='no'>ids</span>[, <span class='no'>chunk</span> <span class='kw'>:=</span> <span class='fu'><a href='chunk.html'>binpack</a></span>(<span class='no'>runtime</span>, <span class='fl'>3600</span>)]</div><div class='output co'>#&gt;      job.id      type   runtime chunk
#&gt;       &lt;int&gt;    &lt;fctr&gt;     &lt;num&gt; &lt;int&gt;
#&gt;   1:      1 estimated 1042.7630    75
#&gt;   2:      2 estimated 1042.5288    75
#&gt;   3:      3 estimated  190.2161    71
#&gt;   4:      5 estimated  194.7092    69
#&gt;  ---                                 
#&gt; 446:    495 estimated  565.3525    28
#&gt; 447:    496 estimated 1398.7162    11
#&gt; 448:    498 estimated  600.2321     5
#&gt; 449:    499 estimated  577.6769    20
#&gt; 450:    500 estimated  565.3525    29</div><div class='input'><span class='fu'>print</span>(<span class='no'>ids</span>)</div><div class='output co'>#&gt;      job.id      type   runtime chunk
#&gt;       &lt;int&gt;    &lt;fctr&gt;     &lt;num&gt; &lt;int&gt;
#&gt;   1:      1 estimated 1042.7630    75
#&gt;   2:      2 estimated 1042.5288    75
#&gt;   3:      3 estimated  190.2161    71
#&gt;   4:      5 estimated  194.7092    69
#&gt;  ---                                 
#&gt; 446:    495 estimated  565.3525    28
#&gt; 447:    496 estimated 1398.7162    11
#&gt; 448:    498 estimated  600.2321     5
#&gt; 449:    499 estimated  577.6769    20
#&gt; 450:    500 estimated  565.3525    29</div><div class='input'><span class='fu'>print</span>(<span class='no'>ids</span>[, <span class='fu'>list</span>(<span class='kw'>runtime</span> <span class='kw'>=</span> <span class='fu'>sum</span>(<span class='no'>runtime</span>)), <span class='kw'>by</span> <span class='kw'>=</span> <span class='no'>chunk</span>])</div><div class='output co'>#&gt;     chunk  runtime
#&gt;     &lt;int&gt;    &lt;num&gt;
#&gt;  1:    75 3599.634
#&gt;  2:    71 3526.596
#&gt;  3:    69 3555.678
#&gt;  4:    74 3598.490
#&gt;  5:    70 3547.382
#&gt;  6:    73 3481.064
#&gt;  7:    44 3598.983
#&gt;  8:    63 3598.639
#&gt;  9:    64 3591.342
#&gt; 10:    61 3599.632
#&gt; 11:    54 3599.794
#&gt; 12:    60 3598.456
#&gt; 13:    11 3598.433
#&gt; 14:    66 3575.416
#&gt; 15:    12 3599.998
#&gt; 16:    56 3599.357
#&gt; 17:    58 3579.388
#&gt; 18:    67 3572.117
#&gt; 19:    48 3493.377
#&gt; 20:    55 3599.610
#&gt; 21:    65 3584.737
#&gt; 22:    57 3583.530
#&gt; 23:    72 3507.284
#&gt; 24:     5 3599.728
#&gt; 25:     9 3599.812
#&gt; 26:    59 3599.546
#&gt; 27:     8 3598.353
#&gt; 28:     6 3599.869
#&gt; 29:    42 3599.998
#&gt; 30:    43 3595.108
#&gt; 31:     2 3599.456
#&gt; 32:     7 3595.887
#&gt; 33:    76 3593.940
#&gt; 34:    83 3559.835
#&gt; 35:     4 3599.716
#&gt; 36:    80 3487.133
#&gt; 37:    81 3466.403
#&gt; 38:    38 3599.211
#&gt; 39:    82 3581.822
#&gt; 40:    51 3596.527
#&gt; 41:    41 3599.323
#&gt; 42:    40 3599.856
#&gt; 43:    37 3598.738
#&gt; 44:    85 3511.181
#&gt; 45:    52 3597.366
#&gt; 46:     1 3598.435
#&gt; 47:    79 3514.954
#&gt; 48:    53 3599.106
#&gt; 49:    68 3567.779
#&gt; 50:     3 3599.286
#&gt; 51:    39 3599.455
#&gt; 52:    84 3547.831
#&gt; 53:    78 3545.777
#&gt; 54:    77 3560.818
#&gt; 55:    36 3476.231
#&gt; 56:    46 3520.416
#&gt; 57:    50 3471.632
#&gt; 58:    30 3503.415
#&gt; 59:    16 3598.306
#&gt; 60:    14 3599.257
#&gt; 61:    49 3488.351
#&gt; 62:    35 3479.562
#&gt; 63:    45 3599.563
#&gt; 64:    33 3486.125
#&gt; 65:    34 3483.502
#&gt; 66:    13 3598.647
#&gt; 67:    47 3506.455
#&gt; 68:    15 3599.217
#&gt; 69:    62 3598.765
#&gt; 70:    10 3599.863
#&gt; 71:    17 3595.936
#&gt; 72:    28 3520.109
#&gt; 73:    31 3501.391
#&gt; 74:    27 3521.868
#&gt; 75:    29 3512.526
#&gt; 76:    32 3495.982
#&gt; 77:    20 3577.901
#&gt; 78:    23 3561.676
#&gt; 79:    26 3542.520
#&gt; 80:    18 3588.465
#&gt; 81:    21 3575.404
#&gt; 82:    24 3551.578
#&gt; 83:    19 3581.656
#&gt; 84:    22 3564.861
#&gt; 85:    25 3549.851
#&gt; 86:    86 3584.037
#&gt; 87:    90 1005.619
#&gt; 88:    87 3565.369
#&gt; 89:    88 3550.605
#&gt; 90:    89 3532.826
#&gt;     chunk  runtime</div><span class='co'># NOT RUN {</span>
<span class='fu'><a href='submitJobs.html'>submitJobs</a></span>(<span class='no'>ids</span>, <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)
<span class='co'># }</span><div class='input'>
<span class='co'># Group jobs into 10 chunks with similar runtime</span>
<span class='no'>ids</span> <span class='kw'>=</span> <span class='no'>est</span>$<span class='no'>runtimes</span>[<span class='no'>type</span> <span class='kw'>==</span> <span class='st'>"estimated"</span>]
<span class='no'>ids</span>[, <span class='no'>chunk</span> <span class='kw'>:=</span> <span class='fu'><a href='chunk.html'>lpt</a></span>(<span class='no'>runtime</span>, <span class='fl'>10</span>)]</div><div class='output co'>#&gt;      job.id      type   runtime chunk
#&gt;       &lt;int&gt;    &lt;fctr&gt;     &lt;num&gt; &lt;int&gt;
#&gt;   1:      1 estimated 1042.7630     7
#&gt;   2:      2 estimated 1042.5288    10
#&gt;   3:      3 estimated  190.2161     9
#&gt;   4:      5 estimated  194.7092     1
#&gt;  ---                                 
#&gt; 446:    495 estimated  565.3525     6
#&gt; 447:    496 estimated 1398.7162    10
#&gt; 448:    498 estimated  600.2321     4
#&gt; 449:    499 estimated  577.6769     6
#&gt; 450:    500 estimated  565.3525     9</div><div class='input'><span class='fu'>print</span>(<span class='no'>ids</span>[, <span class='fu'>list</span>(<span class='kw'>runtime</span> <span class='kw'>=</span> <span class='fu'>sum</span>(<span class='no'>runtime</span>)), <span class='kw'>by</span> <span class='kw'>=</span> <span class='no'>chunk</span>])</div><div class='output co'>#&gt;     chunk  runtime
#&gt;     &lt;int&gt;    &lt;num&gt;
#&gt;  1:     7 31882.73
#&gt;  2:    10 31884.67
#&gt;  3:     9 31754.67
#&gt;  4:     1 31879.63
#&gt;  5:     8 31754.51
#&gt;  6:     4 31887.96
#&gt;  7:     2 31753.71
#&gt;  8:     3 31884.28
#&gt;  9:     6 31753.85
#&gt; 10:     5 31754.66</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Michel Lang, Bernd Bischl.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>

